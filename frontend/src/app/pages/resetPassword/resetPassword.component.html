<div class="form-container">
  <form
    *ngIf="step === 1"
    (ngSubmit)="requestOtp()"
    #otpForm="ngForm"
    class="form">
    <h2>Password Reset</h2>
    <div class="input-group">
      <label for="username">Username:</label>
      <input
        id="username"
        type="text"
        name="username"
        placeholder="Enter your username"
        [(ngModel)]="username"
        #usernameInput="ngModel"
        required />
      <div *ngIf="isInvalid(usernameInput)" class="error">
        Username is required.
      </div>
    </div>
    <button type="submit" [disabled]="otpForm.invalid">Reset</button>
  </form>

  <form
    *ngIf="step === 2"
    (ngSubmit)="verifyOtp()"
    #verifyForm="ngForm"
    class="form">
    <h2>Verify Account</h2>
    <div class="input-group">
      <label for="otp">OTP:</label>
      <input
        id="otp"
        type="text"
        name="otp"
        placeholder="Enter OTP"
        [(ngModel)]="otp"
        #otpInput="ngModel"
        required />
      <div *ngIf="otpInput.invalid && otpInput.touched" class="error">
        OTP is required.
      </div>
    </div>
    <button type="submit" [disabled]="verifyForm.invalid">Verify OTP</button>
  </form>

  <form
    *ngIf="step === 3"
    (ngSubmit)="resetPassword()"
    #resetForm="ngForm"
    class="form">
    <h2>Password Reset</h2>
    <div class="input-group">
      <label for="password">New Password:</label>
      <input
        id="password"
        type="password"
        name="password"
        placeholder="Enter new password"
        [(ngModel)]="password"
        #passwordInput="ngModel"
        required
        minlength="8"
        pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}" />
      <div
        *ngIf="passwordInput.errors?.['pattern'] && passwordInput.touched"
        class="error">
        Enter a valid password
      </div>
    </div>
    <button type="submit" [disabled]="resetForm.invalid">Reset</button>
  </form>
</div>
